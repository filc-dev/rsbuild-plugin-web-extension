"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["494"],{6549:function(e,n,i){i.r(n),i.d(n,{default:function(){return a}});var s=i(651),r=i(6971);function t(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",pre:"pre",h3:"h3",ul:"ul",li:"li",strong:"strong",ol:"ol"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"configuration",children:["Configuration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configuration",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Learn about all configuration options available in ",(0,s.jsx)(n.code,{children:"rsbuild-plugin-web-extension"}),"."]}),"\n",(0,s.jsxs)(n.h2,{id:"plugin-options",children:["Plugin Options",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plugin-options",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The plugin accepts a configuration object with the following options:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface Options {\n  manifest: chrome.runtime.ManifestV3;\n}\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"manifest",children:["manifest",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#manifest",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Type"}),": ",(0,s.jsx)(n.code,{children:"chrome.runtime.ManifestV3"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Required"}),": ",(0,s.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The Chrome Extension Manifest V3 configuration object. This will be processed and written to ",(0,s.jsx)(n.code,{children:"dist/manifest.json"})," during build."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { pluginWebExtension } from "rsbuild-plugin-web-extension";\n\nexport default defineConfig({\n  plugins: [\n    pluginWebExtension({\n      manifest: {\n        manifest_version: 3,\n        name: "My Extension",\n        version: "1.0.0",\n        // ... other manifest properties\n      },\n    }),\n  ],\n});\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"automatic-configurations",children:["Automatic Configurations",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#automatic-configurations",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The plugin automatically configures several Rsbuild settings to optimize web extension development:"}),"\n",(0,s.jsxs)(n.h3,{id:"entry-points",children:["Entry Points",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entry-points",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Entry points are automatically derived from your manifest configuration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"popup"}),": From ",(0,s.jsx)(n.code,{children:"manifest.action.default_popup"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"devtools"}),": From ",(0,s.jsx)(n.code,{children:"manifest.devtools_page"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"newtab"}),": From ",(0,s.jsx)(n.code,{children:"manifest.chrome_url_overrides.newtab"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"options"}),": From ",(0,s.jsx)(n.code,{children:"manifest.options_ui.page"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"background"}),": From ",(0,s.jsx)(n.code,{children:"manifest.background.service_worker"})]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"output-configuration",children:["Output Configuration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#output-configuration",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'{\n  output: {\n    filenameHash: false,        // Disable hashing for extension compatibility\n    filename: {\n      js: "index.js",           // Consistent filename\n    },\n    distPath: {\n      js: "src/[name]",         // Organize by entry name\n    },\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"development-server",children:["Development Server",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#development-server",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'{\n  server: {\n    port: 3130,                 // Default development port\n  },\n  dev: {\n    client: {\n      port: 3130,\n      host: "localhost",\n    },\n    writeToDisk: true,          // Required for extension loading\n  },\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"hot-module-replacement",children:["Hot Module Replacement",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#hot-module-replacement",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'{\n  output: {\n    // HMR files location\n    hotUpdateChunkFilename: "hot/[id].[fullhash].hot-update.js",\n    hotUpdateMainFilename: "hot/[runtime].[fullhash].hot-update.json",\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"environment-variables",children:["Environment Variables",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#environment-variables",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"port",children:["PORT",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#port",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Change the development server port:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PORT=8080 npm run dev\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"",children:[(0,s.jsx)(n.strong,{children:"FIREFOX"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Enable Firefox-specific manifest transformations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"__FIREFOX__=true npm run build\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Convert ",(0,s.jsx)(n.code,{children:"background.service_worker"})," to ",(0,s.jsx)(n.code,{children:"background.scripts"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add Firefox-compatible ",(0,s.jsx)(n.code,{children:"content_security_policy"})]}),"\n",(0,s.jsxs)(n.li,{children:["Handle ",(0,s.jsx)(n.code,{children:"options_page"})," vs ",(0,s.jsx)(n.code,{children:"options_ui"})," differences"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"file-processing",children:["File Processing",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#file-processing",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"automatic-extension-transformation",children:["Automatic Extension Transformation",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#automatic-extension-transformation",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"The plugin automatically transforms file extensions in the manifest:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:".tsx"}),", ",(0,s.jsx)(n.code,{children:".jsx"}),", ",(0,s.jsx)(n.code,{children:".ts"})," → ",(0,s.jsx)(n.code,{children:".js"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:".scss"}),", ",(0,s.jsx)(n.code,{children:".sass"}),", ",(0,s.jsx)(n.code,{children:".stylus"})," → ",(0,s.jsx)(n.code,{children:".css"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'// In manifest.ts\nconst manifest = {\n  action: {\n    default_popup: "./src/popup/index.html", // References popup.tsx\n  },\n  background: {\n    service_worker: "./src/background/index.ts", // Will become index.js\n  },\n};\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"html-entry-processing",children:["HTML Entry Processing",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#html-entry-processing",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"For each HTML file in your manifest, the plugin:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Creates an Rsbuild entry point"}),"\n",(0,s.jsx)(n.li,{children:"Configures HTMLPlugin to process the template"}),"\n",(0,s.jsxs)(n.li,{children:["Converts ",(0,s.jsx)(n.code,{children:".html"})," references to their corresponding ",(0,s.jsx)(n.code,{children:".tsx"}),"/",(0,s.jsx)(n.code,{children:".jsx"})," files"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"integration-with-other-plugins",children:["Integration with Other Plugins",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#integration-with-other-plugins",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"react",children:["React",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#react",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { pluginReact } from "@rsbuild/plugin-react";\nimport { pluginWebExtension } from "rsbuild-plugin-web-extension";\n\nexport default defineConfig({\n  plugins: [pluginReact(), pluginWebExtension({ manifest })],\n});\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"vue",children:["Vue",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vue",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { pluginVue } from "@rsbuild/plugin-vue";\nimport { pluginWebExtension } from "rsbuild-plugin-web-extension";\n\nexport default defineConfig({\n  plugins: [pluginVue(), pluginWebExtension({ manifest })],\n});\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"typescript",children:["TypeScript",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#typescript",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"TypeScript support is enabled by default. Make sure to install Chrome types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install -D @types/chrome\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"custom-rsbuild-configuration",children:["Custom Rsbuild Configuration",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#custom-rsbuild-configuration",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"You can still customize Rsbuild configuration alongside the plugin:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'export default defineConfig({\n  plugins: [pluginWebExtension({ manifest })],\n  // Additional Rsbuild configuration\n  source: {\n    alias: {\n      "@": "./src",\n    },\n  },\n  tools: {\n    postcss: {\n      plugins: [\n        // Your PostCSS plugins\n      ],\n    },\n  },\n});\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"troubleshooting",children:["Troubleshooting",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#troubleshooting",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"common-issues",children:["Common Issues",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-issues",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"HMR not working in extension pages"})}),"\n",(0,s.jsxs)(n.p,{children:["Make sure ",(0,s.jsx)(n.code,{children:"dev.writeToDisk"})," is ",(0,s.jsx)(n.code,{children:"true"})," (this is set automatically by the plugin)."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Extension not loading after changes"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Check the browser's extension management page for errors"}),"\n",(0,s.jsx)(n.li,{children:"Reload the extension manually"}),"\n",(0,s.jsxs)(n.li,{children:["Verify the ",(0,s.jsx)(n.code,{children:"dist/manifest.json"})," is being generated correctly"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"TypeScript errors with Chrome APIs"})}),"\n",(0,s.jsx)(n.p,{children:"Install Chrome types:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install -D @types/chrome\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Add to your ",(0,s.jsx)(n.code,{children:"tsconfig.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "types": ["chrome"]\n  }\n}\n'})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}let a=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["guide%2Fconfiguration.md"]={toc:[{text:"Plugin Options",id:"plugin-options",depth:2},{text:"manifest",id:"manifest",depth:3},{text:"Automatic Configurations",id:"automatic-configurations",depth:2},{text:"Entry Points",id:"entry-points",depth:3},{text:"Output Configuration",id:"output-configuration",depth:3},{text:"Development Server",id:"development-server",depth:3},{text:"Hot Module Replacement",id:"hot-module-replacement",depth:3},{text:"Environment Variables",id:"environment-variables",depth:2},{text:"PORT",id:"port",depth:3},{text:"**FIREFOX**",id:"firefox",depth:3},{text:"File Processing",id:"file-processing",depth:2},{text:"Automatic Extension Transformation",id:"automatic-extension-transformation",depth:3},{text:"HTML Entry Processing",id:"html-entry-processing",depth:3},{text:"Integration with Other Plugins",id:"integration-with-other-plugins",depth:2},{text:"React",id:"react",depth:3},{text:"Vue",id:"vue",depth:3},{text:"TypeScript",id:"typescript",depth:3},{text:"Custom Rsbuild Configuration",id:"custom-rsbuild-configuration",depth:2},{text:"Troubleshooting",id:"troubleshooting",depth:2},{text:"Common Issues",id:"common-issues",depth:3}],title:"Configuration",frontmatter:{}}}}]);